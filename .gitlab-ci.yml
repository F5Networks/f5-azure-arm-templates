image: node:4

stages:
    - test
    - package

test:
    tags:
        - docker-executor
    stage: test
    only:
        - /^master*/
        - triggers
    script:
<<<<<<< HEAD
        - python -B -m unittest discover -s build/test/lib -p "*Tst*.py"
=======
        - python -B -m unittest discover -s build/test/lib -p "*Test*.py"
>>>>>>> 02fcff4fe062c3bc6f3ea2675b1e6dc7e1cc5d24

package:
    tags:
        - docker-executor
    stage: package
    only:
        - /^master*/
        - triggers
    script:
        - cd build
        - bash ./create_hashes.sh
    artifacts:
        name: f5-build-$CI_BUILD_REF
        paths:
            - build/
