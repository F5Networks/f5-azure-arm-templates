{# ####################################### ARM Outputs ########################################}
{% if type == 'standalone' %}
    {% if stack == 'existing-stack' %}
        {% set gui_url = "[if(equals(parameters('provisionPublicIP'),'No'), concat('https://', reference(variables('mgmtNicId')).ipConfigurations[0].properties.privateIPAddress, ':', variables('bigIpMgmtPort')), concat('https://', reference(variables('mgmtPublicIPAddressId')).dnsSettings.fqdn, ':', variables('bigIpMgmtPort')))]" %}
        {% set ssh_url = "[if(equals(parameters('provisionPublicIP'),'No'), concat(reference(variables('mgmtNicId')).ipConfigurations[0].properties.privateIPAddress, ' ',22), concat(reference(variables('mgmtPublicIPAddressId')).dnsSettings.fqdn, ' ',22))]" %}
    {% else %}
        {% set gui_url = "[concat('https://', reference(variables('mgmtPublicIPAddressId')).dnsSettings.fqdn, ':', variables('bigIpMgmtPort'))]" %}
        {% set ssh_url = "[concat(reference(variables('mgmtPublicIPAddressId')).dnsSettings.fqdn, ' ',22)]" %}
    {% endif %}
    {# Add learning stack output(s) #}
    {% if stack == 'learning-stack' %}
        {% set example_app_url = "[concat('http://', reference(concat(variables('extPublicIPAddressIdPrefix'), '0')).dnsSettings.fqdn, ':', variables('webVmVsPort'))]" %}
    {% endif %}
{% endif %}
{% if type == 'failover' and nics == '1' %}
    {% if stack == 'existing-stack' %}
        {% set gui_url = "[concat('https://',reference(variables('mgmtPublicIPAddressId')).dnsSettings.fqdn,':8443')]" %}
        {% set ssh_url = "[concat(reference(variables('mgmtPublicIPAddressId')).dnsSettings.fqdn,' ',8022)]"  %}
    {% else %}
        {% set gui_url = "[concat('https://',reference(variables('mgmtPublicIPAddressId')).dnsSettings.fqdn,':8443')]" %}
        {% set ssh_url = "[concat(reference(variables('mgmtPublicIPAddressId')).dnsSettings.fqdn,' ',8022)]" %}
    {% endif %}
{% endif %}
{% if type == 'failover' and nics in ('3', 'n') %}
    {% if stack == 'existing-stack' %}
        {% set gui_url = "[if(equals(parameters('provisionPublicIP'),'No'), concat('https://',reference(concat(variables('mgmtNicId'), '0')).ipConfigurations[0].properties.privateIPAddress, ':', variables('bigIpMgmtPort')), concat('https://',reference(concat(variables('mgmtPublicIPAddressId'), '0')).dnsSettings.fqdn, ':', variables('bigIpMgmtPort')))]" %}
        {% set ssh_url = "[if(equals(parameters('provisionPublicIP'),'No'), concat(reference(concat(variables('mgmtNicId'), '0')).ipConfigurations[0].properties.privateIPAddress,' ',22), concat('https://',reference(concat(variables('mgmtPublicIPAddressId'), '0')).dnsSettings.fqdn, ':', variables('bigIpMgmtPort')))]" %}
    {% else: %}
        {% set gui_url = "[concat('https://',reference(concat(variables('mgmtPublicIPAddressId'), '0')).dnsSettings.fqdn, ':', variables('bigIpMgmtPort'))]" %}
        {% set ssh_url = "[concat(reference(concat(variables('mgmtPublicIPAddressId'), '0')).dnsSettings.fqdn,' ',22)]" %}
    {% endif %}
    {# Add learning stack output(s) #}
    {% if stack == 'learning-stack': %}
        {% set example_app_url = "[concat('http://', reference(concat(variables('extPublicIPAddressIdPrefix'), '0')).dnsSettings.fqdn, ':', variables('webVmVsPort'))]" %}
    {% endif %}
{% endif %}
{% if type == 'autoscale' and solution in ('ltm', 'waf') and lb_method == 'via-lb' %}
    {% if license_type == 'bigiq-payg': %}
        {% set gui_url = "[concat('https://',reference(variables('mgmtPublicIPAddressId')).dnsSettings.fqdn,':50101', ' - 50109')]" %}
        {% set gui_url_dynamic = "[concat('https://',reference(variables('mgmtPublicIPAddressId')).dnsSettings.fqdn,':50110', ' - 50200')]" %}
        {% set ssh_url = "[concat(reference(variables('mgmtPublicIPAddressId')).dnsSettings.fqdn,' ',50001, ' - 50009')]" %}
        {% set ssh_url_dynamic = "[concat(reference(variables('mgmtPublicIPAddressId')).dnsSettings.fqdn,' ',50010, ' - 50100')]" %}
    {% else:%}
        {% set gui_url = "[concat('https://',reference(variables('mgmtPublicIPAddressId')).dnsSettings.fqdn,':50101', ' - 50200')]" %}
        {% set ssh_url = "[concat(reference(variables('mgmtPublicIPAddressId')).dnsSettings.fqdn,' ',50001, ' - 50100')]" %}
    {% endif %}
{% endif %}
{% if type == 'autoscale' and solution in ('ltm', 'waf') and lb_method =="dns" %}
    {# Do nothing currently #}
    {% set gui_url = "N/A" %}
    {% set ssh_url = "N/A" %}

{% endif %}
        "GUI-URL": {
            "type": "string",
            "value": "{{ gui_url }}"
        },
{% if license_type == 'bigiq-payg' %}
        "GUI-URL-DYNAMIC": {
            "type": "string",
            "value": "{{ gui_url_dynamic }}"
        },
{% endif %}
        "SSH-URL": {
            "type": "string",
            "value": "{{ ssh_url }}"
        }
{% if license_type == 'bigiq-payg' %}
        ,"SSH-URL-DYAMIC": {
            "type": "string",
            "value": "{{ ssh_url_dynamic }}"
        }
{% endif %}
{% if stack == 'learning-stack' %}
        ,"EXAMPLE-APP-URL": {
            "type": "string",
            "value": "{{ example_app_url }}"
        }
{% endif %}
