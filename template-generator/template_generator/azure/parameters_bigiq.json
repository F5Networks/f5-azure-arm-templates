{% import 'constants.json'  as constants with context %}
{% block parameters %}
        "adminUsername": {
            "defaultValue": "azureuser",
            "metadata": {
                "description": "User name for the Virtual Machine."
            },
            "type": "string"
        },
        "adminPassword": {
            "metadata": {
                "description": "Password to login to the Virtual Machine. Note: There are a number of special characters that you should avoid using for F5 product user accounts.  See [K2873](https://support.f5.com/csp/article/K2873) for details."
            },
            "type": "securestring"
        },
    {%- if stack == 'new-stack' %}
        "vmRoleName": {
            "defaultValue": "Contributor",
            "metadata": {
                "description": "Name of the Azure Active Directory Role to assign to the Managed Identity attached to the Virtual Machines."
            }, 
            "type": "string"
        },
    {%- endif %}
        "masterKey": {
            "metadata": {
                "description": "Specify BIG-IQ master Key."
            },
            "type": "securestring"
        },
        "dnsLabel": {
            "metadata": {
                "description": "Unique DNS Name for the Public IP address used to access the Virtual Machine."
            },
            "type": "string"
        },
        "instanceName": {
            "defaultValue": "f5vm01", 
            "metadata": {
                "description": "Name of the Virtual Machine."
            }, 
            "type": "string"
        },
        "instanceType": {
            "allowedValues": [
                {{ constants.instance_type_list }}
            ],
            "defaultValue": {{ constants.default_instance_type }},
            "metadata": {
                "description": "Instance size of the Virtual Machine."
            },
            "type": "string"
        },
        "bigIqVersion": {
            "allowedValues": [
                {{ constants.big_iq_versions }}
            ],
            "defaultValue": {{ constants.big_iq_version_default }},
            "metadata": {
                "description": "F5 BIG-IQ version you want to use."
            },
            "type": "string"
        },
        "bigIqLicenseKey1": {
            "defaultValue": "",
            "metadata": {
                "description": "F5 BYOL BIG-IQ License Manager registration key."
            },
            "maxLength": 255,
            "minLength": 1,
            "type": "string"
        },
    {% if bigiq_solution == 'cluster' %}
        "bigIqLicenseKey2": {
            "defaultValue": "",
            "metadata": {
                "description": "The license token for the F5 BIG-IQ VE (BYOL). This field is required when deploying two or more devices."
            },
            "type": "string"
        },
    {% endif %}
        "licensePoolKeys": {
            "defaultValue": "Do_Not_Create",
            "metadata": {
                "description": "Enter a pool name and registration key using the format of name:key. Leave Do_Not_Create if you do not want to create a licensing pool on BIG-IQ at this time."
            },
            "maxLength": 255,
            "minLength": 1,
            "type": "string"
        },
        "regPoolKeys": {
            "defaultValue": "Do_Not_Create",
            "metadata": {
                "description": "Enter a pool name and a list of individual BIG-IP registration keys in the format of name:key,key,key. Leave Do_Not_Create if you do not want to create a reg key pool on BIG-IQ at this time."
            },
            "maxLength": 255,
            "minLength": 1,
            "type": "string"
        },
{%- if bigiq_solution == 'standalone' -%}
        "numberOfInternalIps": {
            "allowedValues": [
                0,
                1
            ],
            "defaultValue": 1,
            "metadata": {
                "description": "The number of public/private IP addresses you want to deploy for the application traffic (internal) NIC on the BIG-IQ VE to be used for virtual servers."
            },
            "type": "int"
        },
{%- endif -%}
{% if stack == 'existing-stack' %}
        "vnetName": {
            "metadata": {
                "description": "The name of the existing virtual network to which you want to connect the BIG-IP VEs."
            },
            "type": "string"
        },
        "vnetResourceGroupName": {
            "metadata": {
                "description": "The name of the resource group that contains the Virtual Network where the BIG-IP VE will be placed."
            },
            "type": "string"
        },
    {%- if bigiq_solution == 'cluster' %}
        "userAssignedIdentityResourceGroupName": {
            "metadata": {
                "description": "The name of the resource group that contains the User Assigned Identity."
            },
            "type": "string"
        },
        "userAssignedIdentityName": {
            "metadata": {
                "description": "The name of the existing User Assigned Identity that has access to the existing resource group with the Virtual Network"
            },
            "type": "string"
        },
    {%- endif %}
        "mgmtSubnetName": {
            "metadata": {
                "description": "Name of the existing mgmt subnet - with external access to the Internet. **Important**: The subnet you provide for the mgmt NIC **must** be unique."
            },
            "type": "string"
        },
{% else %}
        "vnetAddressPrefix": {
            "defaultValue": "10.0", 
            "metadata": {
                "description": "The start of the CIDR block the BIG-IQ VEs use when creating the Vnet and subnets.  You MUST type just the first two octets of the /16 virtual network that will be created, for example '10.0', '10.100', 192.168'."
            }, 
            "type": "string"
        },
{%- endif %}
{%- if stack == 'existing-stack' %}
    {%- if bigiq_solution == 'cluster' %}
        "mgmtIpAddressRangeStart": {
            "metadata": {
                "description": "The static private IP address you want to assign to the management self IP of the first BIG-IQ. The next contiguous address will be used for the second BIG-IQ device."
            },
            "type": "string"
        },
    {%- else %}
        "mgmtIpAddress": {
            "metadata": {
                "description": "MGMT subnet IP Address to use for the BIG-IP management IP address."
                },
                "type": "string"
        },
    {%- endif %}
        "internalSubnetName": {
            "metadata": {
                "description": "Name of the existing internal subnet. **Important**: The subnet you provide for the internal NIC **must** be unique."
            },
            "type": "string"
            },
  {%- if bigiq_solution == 'cluster' %}
        "internalIpSelfAddressRangeStart": {
            "metadata": {
                "description": "The static private IP address you want to assign to the internal self IP (primary) of the first {{ constants.product }} VE. The next contiguous address will be used for the second {{ constants.product }} device."
            },
            "type": "string"
        },
  {%- endif %}
        "internalIpAddressRangeStart": {
                "metadata": {
                    "description": "The static private IP address you would like to assign to the internal self IP of the first {{ constants.product }} VE. The next contiguous address will be used for the second {{ constants.product }} device."
                },
                "type": "string"
            },
{%- endif %}
{%- if bigiq_solution == 'standalone' -%}
        "avSetChoice": {
            "defaultValue": "CREATE_NEW",
            "metadata": {
                "description": "If you want the VM placed in a new Azure Availability Set, leave the default value of **CREATE_NEW**, otherwise specify the name of the existing Availability Set you want to use. Note: If you are using an existing AV Set, this deployment must be in the same Azure Resource Group as the AV Set."
            },
            "type": "string"
        },
{%- endif %}
        "ntpServer": {
            "defaultValue": "0.pool.ntp.org",
            "metadata": {
                "description": "Leave the default NTP server the {{ constants.product }} uses, or replace the default NTP server with the one you want to use."
            },
            "type": "string"
        },
        "timeZone": {
            "defaultValue": "UTC",
            "metadata": {
                "description": "If you would like to change the time zone the {{ constants.product }} uses, enter the time zone you want to use. This is based on the tz database found in /usr/share/zoneinfo (see the full list [here](https://github.com/F5Networks/f5-azure-arm-templates/blob/master/azure-timezone-list.md)). Example values: UTC, US/Pacific, US/Eastern, Europe/London or Asia/Singapore."
            },
            "type": "string"
        },
        "customImage": {
            "defaultValue": "OPTIONAL",
            "metadata": {
                "description": "If you would like to deploy using a local BIG-IQ image, provide either the full URL to the VHD in Azure storage **or** the full resource ID to an existing Microsoft.Compute image resource.  **Note**: Unless specifically required, leave the default of **OPTIONAL**."
            },
            "type": "string"
        },
        "restrictedSrcAddress": {
            "metadata": {
                "description": "This field restricts management access to a specific network or address. Enter an IP address or address range in CIDR notation, or asterisk for all sources"
            },
            "type": "string"
        },
        "tagValues": {
            "defaultValue": {
                "application": "APP",
                "cost": "COST",
                "environment": "ENV",
                "group": "GROUP",
                "owner": "OWNER"
            },
            "metadata": {
                "description": "Default key/value resource tags will be added to the resources in this deployment, if you would like the values to be unique adjust them as needed for each key."
            },
            "type": "object"
        },
        "allowUsageAnalytics": {
            "allowedValues": [
                "Yes",
                "No"
            ],
            "defaultValue": "Yes",
            "metadata": {
                "description": "This deployment can send anonymous statistics to F5 to help us determine how to improve our solutions. If you select **No** statistics are not sent."
            },
            "type": "string"
        }
{% endblock %}